@model OnePageCheckoutModel
@using Nop.Web.Models.Checkout;
@using Nop.Core.Infrastructure;
@{
    Layout = "~/Views/Shared/_Root.cshtml";

    Html.AddScriptParts("~/Themes/DefaultTheme/Content/js/public.onepagecheckout.js");

    Html.AppendCssFileParts("~/Themes/DefaultTheme/Content/css/checkout.css");

    var storeLocation = EngineContext.Current.Resolve<Nop.Core.IWebHelper>().GetStoreLocation();

    //title
    Html.AddTitleParts(T("PageTitle.Checkout").Text);
}
@{
    //step numbers
    int billingAddressStepNumber = 1;
    int shippingAddressStepNumber = 2;
    int shippingMethodStepNumber = 3;
    int paymentMethodStepNumber = 4;
    int paymentInfoStepNumber = 5;
    int confirmOrderStepNumber = 6;
    if (!Model.ShippingRequired)
    {
        paymentMethodStepNumber = paymentMethodStepNumber - 2;
        paymentInfoStepNumber = paymentInfoStepNumber - 2;
        confirmOrderStepNumber = confirmOrderStepNumber - 2;
    }
    if (Model.DisableBillingAddressCheckoutStep)
    {
        shippingAddressStepNumber--;
        shippingMethodStepNumber--;
        paymentMethodStepNumber--;
        paymentInfoStepNumber--;
        confirmOrderStepNumber--;
    }
}
<div class="checkout-box">
    <div class="checkout-box-bd" id="checkout-steps">
        @if (Model.ShippingRequired)
        {
            <div class="xm-box">
                <div class="box-hd ">
                    <h2 class="title">收货地址</h2>
                    <!---->
                </div>
                <div class="box-bd">
                    <form action="" id="co-shipping-form">
                        <div id="checkout-shipping-load">
                            @Html.Action("OpcShippingForm", "Checkout")
                            @*shipping address content will be loaded here*@
                        </div>

                        @*选择地址样式*@
                        <ul class="address-list">
                            <li class="selected">
                                <div class="address-info">
                                    <input type="radio" />
                                    <label class="user-address" for="addrId_773403376">
                                        四川省 成都市 其它区 高新西区碧琳街99号9栋2单元802 (王晓 收)
                                        <em>18628188705</em>
                                    </label>
                                </div>
                            </li>
                        </ul>

                        <a class="btn btn-white btn-small">
                            <i class="iconfont font12">&#xf0175;</i>
                            使用新地址
                        </a>
                    </form>
                    <script type="text/javascript">
                        Shipping.init('#co-shipping-form', '@(storeLocation)checkout/OpcSaveShipping/');
                        if ($("#shipping-address-select").length > 0) {
                            Shipping.newAddress(!$('#shipping-address-select').val());
                        }
                    </script>
                    <div class="buttons" id="shipping-buttons-container">
                        <br />
                        <input type="button" class="btn btn-primary" title="@T("Common.Continue")" onclick="Shipping.save()" value="@T("Common.Continue")" />
                        <span id="shipping-please-wait" class="please-wait" style="display: none;"> @T("Common.LoadingNextStep")</span>
                    </div>
                </div>
            </div>
    <div class="xm-box">
        <div class="box-hd ">
            <h2 class="title">配送方式</h2>
            <!---->
        </div>
        <div class="box-bd">
            <form id="co-shipping-method-form" action="">
                <div id="checkout-shipping-method-load">
                    @*shipping methods content will be loaded here*@
                </div>


                <script type="text/javascript">
                    ShippingMethod.init('#co-shipping-method-form', '@(storeLocation)checkout/OpcSaveShippingMethod/');
                </script>
                <div class="buttons" id="shipping-method-buttons-container">
                    <br />
                    <p class="back-link">
                        <a href="#" class="btn btn-lineDakeLight" onclick="Checkout.back(); return false;"><small>&laquo; </small>@T("Common.Back")</a>
                    </p>
                    <input type="button" class="btn btn-primaryn" onclick="ShippingMethod.save()" value="@T("Common.Continue")" />
                    <span id="shipping-method-please-wait" class="please-wait" style="display: none;">@T("Common.LoadingNextStep")</span>
                </div>
            </form>
        </div>
    </div>
        }
        <div class="xm-box">
            <div class="box-hd ">
                <h2 class="title">支付方式</h2>
                <!---->
            </div>
            <div class="box-bd">
                <form action="" id="co-payment-method-form">
                    <div id="checkout-payment-method-load">
                        @*payment methods content will be loaded here*@ Payment is not required
                    </div>
                </form>
                <script type="text/javascript">
                    PaymentMethod.init('#co-payment-method-form', '@(storeLocation)checkout/OpcSavePaymentMethod/');
                </script>
                <div class="buttons" id="payment-method-buttons-container">
                    <br />
                    <p class="back-link">
                        <a href="#" class="btn btn-lineDakeLight" onclick="Checkout.back(); return false;"><small>&laquo; </small>@T("Common.Back")</a>
                    </p>
                    <input type="button" class="btn btn-primaryn" onclick="PaymentMethod.save()" value="@T("Common.Continue")" />
                    <span class="please-wait" id="payment-method-please-wait" style="display: none;">@T("Common.LoadingNextStep")</span>
                </div>
            </div>
        </div>
        <div class="xm-box">
            <div class="box-hd ">
                <h2 class="title">支付信息</h2>
                <!---->
            </div>
            <div class="box-bd">
                <form action="" id="co-payment-info-form">
                    <div id="checkout-payment-info-load">
                        @*payment info content will be loaded here*@ Payment is not required
                    </div>
                </form>
                <script type="text/javascript">
                    PaymentInfo.init('#co-payment-info-form', '@(storeLocation)checkout/OpcSavePaymentInfo/');
                </script>
                <div class="buttons" id="payment-info-buttons-container">
                    <br />
                    <p class="back-link">
                        <a href="#" class="btn btn-lineDakeLight" onclick="Checkout.back(); return false;"><small>&laquo; </small>@T("Common.Back")</a>
                    </p>
                    <input type="button" class="btn btn-primaryn" onclick="PaymentInfo.save()" value="@T("Common.Continue")" />
                    <span class="please-wait" id="payment-info-please-wait" style="display: none;">@T("Common.LoadingNextStep")</span>
                </div>
            </div>
        </div>
        <div class="xm-box">
            <div class="box-hd ">
                <h2 class="title">订单确认</h2>
                <!---->
            </div>
            <div class="box-bd">
                <div id="checkout-confirm-order-load">
                    @*confirm order content will be loaded here*@
                </div>

                @*订单确认样式*@
                <dl class="checkout-goods-list">
                    <dt class="clearfix">
                        <span class="col col-1">商品名称</span>
                        <span class="col col-2">单品价格</span>
                        <span class="col col-3">购买数量</span>
                        <span class="col col-4">小计</span>
                    </dt>
                    <dd class="item clearfix">
                        <div class="item-row">
                            <div class="col col-1">
                                <div class="g-pic">
                                    <img width="40" height="40" srcset="http://img08.mifile.cn/v1/MI_18455B3E4DA706226CF7535A58E875F0267/T11axTB_hT1RXrhCrK.jpg?width=80&height=80 2x" src="http://img08.mifile.cn/v1/MI_18455B3E4DA706226CF7535A58E875F0267/T11axTB_hT1RXrhCrK.jpg?width=80&height=80">
                                </div>
                                <div class="g-info">
                                    <a target="_blank" href="http://www.mi.com/item/1134900438"> QCY派Q8蓝牙耳机 黑色 </a>
                                </div>
                            </div>
                            <div class="col col-2">59.9元</div>
                            <div class="col col-3">1</div>
                            <div class="col col-4">59.9元</div>
                        </div>
                    </dd>
                </dl>

                <div class="checkout-count clearfix">
                    <div class="checkout-count-extend xm-add-buy">
                        <div class="checkout-price">
                            <ul>
                                <li>商品件数：<span>3件</span></li>
                                <li>金额合计：<span>237.9元</span></li>
                                <li>活动优惠：<span>-0.00元</span></li>
                                <li>优惠券抵扣：<span id="couponDesc">-0元</span></li>
                                <li>运费：<span id="postageDesc">0元</span></li>
                            </ul>
                            <p class="checkout-total">应付总额：
                                <span><strong id="totalPrice">237.90</strong>元</span>
                            </p>
                         </div>
                        </div>
                  </div>

                   <script type="text/javascript">
                       ConfirmOrder.init('@(storeLocation)checkout/OpcConfirmOrder/', '@(storeLocation)checkout/completed/');
                   </script>

                @*结算确认样式*@
                <div class="checkout-confirm">
                    <div id="submitAddress" style="margin-bottom: 20px;">
                        <p>四川 成都市 金牛区 碧林街99号中海国际社区橙郡三期 (610081)</p>
                        <p>王晓 186****8705</p>
                    </div>
                    <a class="btn btn-lineDakeLight btn-back-cart" href="http://order.mi.com/cart">返回购物车</a>
                    <input id="checkoutToPay" class="btn btn-primary" type="submit" value="立即下单">
                </div>

                <div class="buttons" id="confirm-order-buttons-container">
                    <br />
                    <p class="back-link">
                        <a href="#" class="btn btn-lineDakeLight" onclick="Checkout.back(); return false;"><small>&laquo; </small>@T("Common.Back")</a>
                    </p>
                    <input type="button" class="btn btn-primaryn" onclick="ConfirmOrder.save()" value="@T("Common.Confirm")" />
                    <span class="please-wait" id="confirm-order-please-wait" style="display: none;">@T("Checkout.SubmittingOrder")</span>
                </div>
    </div>
</div>
</div>
</div>
    <script type="text/javascript">
        Checkout.init('@(storeLocation)cart/');
    </script>
